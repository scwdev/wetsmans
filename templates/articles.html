{% extends 'base.html' %}

{% include 'nav.html' %}

{% block title %}

    Articles - {{g.dr.name}}

{% endblock title %}

{% block content %}
    <script>
        const closeModal = (event) => {
            if (event.target.matches('.modal-button') == false) {
                const article = document.getElementById('article-modal')
                article.classList.add('hidden')
            }
        }
        window.addEventListener("click", closeModal, false);
    </script>

    <ul>
    {% for article in feed.entries %}
        <script>
            const showArticle{{loop.index0}} = () => {
                const article = document.getElementById('article-modal')
                content = `{{feed.entries[loop.index0].summary|safe}}`
                article.innerHTML = content
                article.classList.remove('hidden')
            }
        </script>
        <li>
            <button class='modal-button' onclick=showArticle{{loop.index0}}() >{{article.title}}</button>
            {# <a href="{{article.link}}" target="_blank">{{article.title}}</a> #}
            <h6>{{article.published}}</h6>
        </li>
    {% endfor %}
    </ul>

<article class="modal hidden" id="article-modal">
</article>


{% endblock content %}